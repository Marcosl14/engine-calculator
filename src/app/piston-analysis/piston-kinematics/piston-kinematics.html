<h1>Análisis de Movimiento del Pistón</h1>

<div class="container grid grid-col-2 margin-botton-10">
  <div class="motor-inputs">
    <h3>Motor 1</h3>
    <app-input-card
      label="Diámetro del pistón (mm)"
      id="pistonDiameter1"
      type="number"
      [(value)]="engine1.pistonDiameter"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Carrera (mm)"
      id="stroke1"
      type="number"
      [(value)]="engine1.stroke"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Largo de biela (mm)"
      id="connectingRodLength1"
      type="number"
      [(value)]="engine1.connectingRodLength"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Descentrado del perno (mm)"
      id="pistonOffset1"
      type="number"
      [(value)]="engine1.pistonOffset"
    ></app-input-card>
    <app-input-card
      label="Volumen de cámara (cm³)"
      id="combustionChamberVolume1"
      type="number"
      [(value)]="engine1.combustionChamberVolume"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Revoluciones del motor (1/min o RPM)"
      id="engineRPM1"
      type="number"
      [(value)]="engine1.engineRPM"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Retraso Cierre Admisión (RCA°)"
      id="intakeValveClosing1"
      type="number"
      [(value)]="engine1.intakeValveClosing"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Eficiencia Volumétrica (%)"
      id="volumetricEfficiency1"
      type="number"
      [(value)]="engine1.volumetricEfficiency"
      [validationFns]="[minVolumetricEfficiency, maxVolumetricEfficiency]"
      (validation)="onValidaton($event)"
    ></app-input-card>
  </div>

  <div class="motor-inputs">
    <h3>Motor 2</h3>
    <app-input-card
      label="Diámetro del pistón (mm)"
      id="pistonDiameter2"
      type="number"
      [(value)]="engine2.pistonDiameter"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Carrera (mm)"
      id="stroke2"
      type="number"
      [(value)]="engine2.stroke"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Largo de biela (mm)"
      id="connectingRodLength2"
      type="number"
      [(value)]="engine2.connectingRodLength"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Descentrado del perno (mm)"
      id="pistonOffset2"
      type="number"
      [(value)]="engine2.pistonOffset"
    ></app-input-card>
    <app-input-card
      label="Volumen de cámara (cm³)"
      id="combustionChamberVolume2"
      type="number"
      [(value)]="engine2.combustionChamberVolume"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Revoluciones del motor (1/min o RPM)"
      id="engineRPM2"
      type="number"
      [(value)]="engine2.engineRPM"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Retraso Cierre Admisión (RCA°)"
      id="intakeValveClosing2"
      type="number"
      [(value)]="engine2.intakeValveClosing"
      [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Eficiencia Volumétrica (%)"
      id="volumetricEfficiency2"
      type="number"
      [(value)]="engine2.volumetricEfficiency"
      [validationFns]="[minVolumetricEfficiency, maxVolumetricEfficiency]"
      (validation)="onValidaton($event)"
    ></app-input-card>
  </div>
</div>

<button id="calculateAndGraph" (click)="calculateAndGraph()" [disabled]="buttonDisabled">
  Calcular y Graficar
</button>

<div
  class="container grid grid-col-2 margin-botton-10"
  *ngIf="engine1Volume !== null && engine2Volume !== null"
>
  <div class="motor-results">
    <h3>Motor 1</h3>
    <app-results-card title="Volumen" [value]="engine1Volume | number : '1.2-2'" unit="cm³" />
    <app-results-card
      title="Factor de Compresión Estática"
      [value]="staticCompressionRatio1 | number : '1.2-2'"
      [unit]="': 1 = ' + staticCompressionRatioCharacteristics1?.type?.toUpperCase()"
      [comment]="staticCompressionRatioCharacteristics1?.description"
    />
    <app-results-card
      title="Factor de Compresión Dinámica"
      [value]="dynamicCompressionRatio1 | number : '1.2-2'"
      [unit]="': 1 = ' + dynamicCompressionRatioCharacteristics1?.type?.toUpperCase()"
      [comment]="dynamicCompressionRatioCharacteristics1?.description"
    />
    <app-results-card
      title="Diametro del Cilindro vs Carrera"
      [value]="cilinderDiameterVsStrokeRatio1"
      [unit]="'= ' + cilinderDiameterVsStrokeRatioCharacteristics1?.type?.toUpperCase()"
      [comment]="cilinderDiameterVsStrokeRatioCharacteristics1?.description"
    />
    <app-results-card
      title="Largo Biela vs Carrera"
      [value]="rodStrokeRatio1 | number : '1.2-2'"
      [unit]="'= ' + rodStrokeRatioCharacteristics1?.type?.toUpperCase()"
      [comment]="rodStrokeRatioCharacteristics1?.description"
    />
    <app-results-card
      title="Potencia estimada del motor (HP)"
      [value]="engine1Power | number : '1.2-2'"
      unit="HP"
    />
  </div>
  <div class="motor-results">
    <h3>Motor 2</h3>
    <app-results-card title="Volumen" [value]="engine2Volume | number : '1.2-2'" unit="cm³" />
    <app-results-card
      title="Factor de Compresión Estática"
      [value]="staticCompressionRatio2 | number : '1.2-2'"
      [unit]="': 1 = ' + staticCompressionRatioCharacteristics2?.type?.toUpperCase()"
      [comment]="staticCompressionRatioCharacteristics2?.description"
    />
    <app-results-card
      title="Factor de Compresión Dinámica"
      [value]="dynamicCompressionRatio2 | number : '1.2-2'"
      [unit]="': 1 = ' + dynamicCompressionRatioCharacteristics2?.type?.toUpperCase()"
      [comment]="dynamicCompressionRatioCharacteristics2?.description"
    />
    <app-results-card
      title="Diametro del Cilindro vs Carrera"
      [value]="cilinderDiameterVsStrokeRatio2"
      [unit]="'= ' + cilinderDiameterVsStrokeRatioCharacteristics2?.type?.toUpperCase()"
      [comment]="cilinderDiameterVsStrokeRatioCharacteristics2?.description"
    />
    <app-results-card
      title="Largo Biela vs Carrera"
      [value]="rodStrokeRatio2 | number : '1.2-2'"
      [unit]="'= ' + rodStrokeRatioCharacteristics2?.type?.toUpperCase()"
      [comment]="rodStrokeRatioCharacteristics2?.description"
    />
    <app-results-card
      title="Potencia estimada del motor (HP)"
      [value]="engine2Power | number : '1.2-2'"
      unit="HP"
    />
  </div>
</div>

<div class="container grid grid-col-2 margin-botton-10">
  <app-scatter-chart
    #positionChart
    chartId="positionChart"
    title="Posición del Pistón"
    xLabel="Ángulo de giro (grados)"
    yLabel="Posición (mm)"
    [xStepSize]="45"
  ></app-scatter-chart>
  <app-scatter-chart
    #velocityChart
    chartId="velocityChart"
    title="Velocidad del Pistón"
    xLabel="Ángulo de giro (grados)"
    yLabel="Velocidad (m/s)"
    [xStepSize]="45"
  ></app-scatter-chart>
  <app-scatter-chart
    #accelerationChart
    chartId="accelerationChart"
    title="Aceleración del Pistón"
    xLabel="Ángulo de giro (grados)"
    yLabel="Aceleración (m/s²)"
    [xStepSize]="45"
  ></app-scatter-chart>
  <app-scatter-chart
    #volumeChart
    chartId="volumeChart"
    title="Volumen del Cilindro"
    xLabel="Ángulo de giro (grados)"
    yLabel="Volumen (cm³)"
    [xStepSize]="45"
  ></app-scatter-chart>
</div>
