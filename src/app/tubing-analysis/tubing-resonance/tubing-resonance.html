<h1>Análisis de Resonancia de Conductos</h1>

<div class="container flex-column margin-botton-10">
  <div>
    <div class="motor-inputs">
      <h3>Parámetros del Motor</h3>

      <div class="container grid grid-col-2">
        <app-input-card
          label="Revoluciones del motor (RPM)"
          id="tubing-rpm"
          type="number"
          [(value)]="rpm"
          [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
          (validation)="onValidaton($event)"
        ></app-input-card>
        <app-input-card
          label="Diámetro del Pistón (mm)"
          id="tubing-pistonDiameter"
          type="number"
          [(value)]="pistonDiameter"
          [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
          (validation)="onValidaton($event)"
        ></app-input-card>
        <app-input-card
          label="Carrera del Motor (mm)"
          id="tubing-stroke"
          type="number"
          [(value)]="stroke"
          [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
          (validation)="onValidaton($event)"
        ></app-input-card>
        <app-input-card
          label="Eficiencia Volumétrica"
          id="volumetricEfficiency"
          type="number"
          [(value)]="volumetricEfficiency"
          [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
          (validation)="onValidaton($event)"
        ></app-input-card>
      </div>
    </div>
  </div>

  <div class="container flex-row">
    <div class="motor-inputs">
      <h3>Admisión</h3>
      <app-input-card
        label="Avance Apertura Admisión (AAA°)"
        id="intakeValveOpening"
        type="number"
        [(value)]="intakeValveOpenning"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Retraso Cierre Admisión (RCA°)"
        id="intakeValveClosing"
        type="number"
        [(value)]="intakeValveClosing"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Armónico de Admisión"
        id="intakeHarmonic"
        type="select"
        [options]="intakeHarmonicOptions"
        [(value)]="intakeHarmonic"
      ></app-input-card>
      <app-input-card
        label="Temperatura de Admisión (°C)"
        id="intakeTemperature"
        type="number"
        [(value)]="intakeTemperature"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Velocidad media del aire de Admisión (m/s)"
        id="intakeAverageSpeed"
        type="number"
        [(value)]="intakeAverageSpeed"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Numero de Válvulas de Admisión"
        id="intakeValveAmount"
        type="number"
        [(value)]="intakeValveAmount"
        [validationFns]="[
          inputValidations.positiveNumberBiggerThanZero,
          inputValidations.integerNumber
        ]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Diámetro de la Válvula de Admisión (mm)"
        id="intakeValveDiameter"
        type="number"
        [(value)]="intakeValveDiameter"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Diámetro del Vástago la Válvula de Admisión (mm)"
        id="intakeValveStemDiameter"
        type="number"
        [(value)]="intakeValveStemDiameter"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Ángulo del asiento de la Válvula de Admisión (mm)"
        id="intakeSeatAngle"
        type="number"
        [(value)]="intakeSeatAngle"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Diámetro Interior del Asiento de Admisión (%)"
        id="intakeValveSeatInnerDiameterRatio"
        type="number"
        [(value)]="intakeValveSeatInnerDiameterRatio"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
    </div>

    <div class="motor-inputs">
      <h3>Escape</h3>
      <app-input-card
        label="Avance Apertura Admisión (AAA°)"
        id="intakeValveOpening"
        type="number"
        [(value)]="intakeValveOpenning"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Avance Apertura Escape (AAE°)"
        id="exhaustValveOpenning"
        type="number"
        [(value)]="exhaustValveOpenning"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Armónico de Escape"
        id="exhaustHarmonic"
        type="select"
        [options]="exhaustHarmonicOptions"
        [(value)]="exhaustHarmonic"
      ></app-input-card>
      <app-input-card
        label="Temperatura de Escape (°C)"
        id="exhaustTemperature"
        type="number"
        [(value)]="exhaustTemperature"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Velocidad media de los gases de Escape (m/s)"
        id="exhaustAverageSpeed"
        type="number"
        [(value)]="exhaustAverageSpeed"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Numero de Válvulas de Escape"
        id="exhaustValveAmount"
        type="number"
        [(value)]="exhaustValveAmount"
        [validationFns]="[
          inputValidations.positiveNumberBiggerThanZero,
          inputValidations.integerNumber
        ]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Diámetro de la Válvula de Escape (mm)"
        id="exhaustValveDiameter"
        type="number"
        [(value)]="exhaustValveDiameter"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Diámetro del vástago la Válvula de Escape (mm)"
        id="exhaustValveStemDiameter"
        type="number"
        [(value)]="exhaustValveStemDiameter"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Ángulo del asiento de la Válvula de Escape (mm)"
        id="exhaustSeatAngle"
        type="number"
        [(value)]="exhaustSeatAngle"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
      <app-input-card
        label="Diámetro Interior del Asiento de Escape (%)"
        id="exhaustValveSeatInnerDiameterRatio"
        type="number"
        [(value)]="exhaustValveSeatInnerDiameterRatio"
        [validationFns]="[inputValidations.positiveNumberBiggerThanZero]"
        (validation)="onValidaton($event)"
      ></app-input-card>
    </div>
  </div>
</div>

<button id="calculate" (click)="calculate()" [disabled]="buttonDisabled">Calcular</button>

<div
  class="container grid grid-col-2 margin-botton-10"
  *ngIf="intakeLength !== null || exhaustLength !== null"
>
  <div>
    <app-results-card
      title="Velocidad Sonido Admisión"
      [value]="intakeSoundSpeed | number : '1.2-2'"
      unit="m/s"
    />
    <app-results-card
      title="Largo de Admisión"
      [value]="intakeLength | number : '1.2-2'"
      unit="cm"
    />
    <app-results-card
      title="Diámetro del Tubo de Admisión"
      [value]="intakeDiameter | number : '1.2-2'"
      unit="mm"
    />
    <app-results-card
      title="Máxima Alzada Teórica de Admisión"
      [value]="intakeMaxTheoricalLift | number : '1.2-2'"
      unit="mm"
    />
  </div>
  <div>
    <app-results-card
      title="Velocidad Sonido Escape"
      [value]="exhaustSoundSpeed | number : '1.2-2'"
      unit="m/s"
    />
    <app-results-card
      title="Largo de Escape"
      [value]="exhaustLength | number : '1.2-2'"
      unit="cm"
    />
    <app-results-card
      title="Diámetro del Tubo de Escape"
      [value]="exhaustDiameter | number : '1.2-2'"
      unit="mm"
    />
    <app-results-card
      title="Máxima Alzada Teórica de Escape"
      [value]="exhaustMaxTheoricalLift | number : '1.2-2'"
      unit="mm"
    />
  </div>
</div>

<div class="container grid grid-col-2 margin-botton-10">
  <app-scatter-chart
    #intakeFlowChart
    chartId="intakeFlowChart"
    label="Admisión"
    title="Área de Flujo Válvula de Admisión"
    xLabel="Levante de Válvula (mm)"
    yLabel="Área (mm²)"
    [xStepSize]="1"
    [yStepSize]="10"
  ></app-scatter-chart>
  <app-scatter-chart
    #exhaustFlowChart
    chartId="exhaustFlowChart"
    label="Escape"
    title="Área de Flujo Válvula de Escape"
    xLabel="Levante de Válvula (mm)"
    yLabel="Área (mm²)"
    [xStepSize]="1"
    [yStepSize]="10"
  ></app-scatter-chart>
</div>
