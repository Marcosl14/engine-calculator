<h1>Análisis de Movimiento del Pistón</h1>

<div class="container grid grid-col-2 margin-botton-10">
  <div class="motor-inputs">
    <h3>Motor 1</h3>
    <app-input-card
      label="Diámetro del pistón (mm)"
      id="pistonDiameter1"
      type="number"
      [(value)]="engine1.pistonDiameter"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Carrera (mm)"
      id="stroke1"
      type="number"
      [(value)]="engine1.stroke"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Largo de biela (mm)"
      id="connectingRodLength1"
      type="number"
      [(value)]="engine1.connectingRodLength"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Descentrado del perno (mm)"
      id="pistonOffset1"
      type="number"
      [(value)]="engine1.pistonOffset"
    ></app-input-card>
    <app-input-card
      label="Volumen de cámara (cm³)"
      id="combustionChamberVolume1"
      type="number"
      [(value)]="engine1.combustionChamberVolume"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Revoluciones del motor (1/min o RPM)"
      id="engineRPM1"
      type="number"
      [(value)]="engine1.engineRPM"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Retraso Cierre Admisión (RCA°)"
      id="intakeValveClosing1"
      type="number"
      [(value)]="engine1.intakeValveClosing"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
  </div>

  <div class="motor-inputs">
    <h3>Motor 2</h3>
    <app-input-card
      label="Diámetro del pistón (mm)"
      id="pistonDiameter2"
      type="number"
      [(value)]="engine2.pistonDiameter"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Carrera (mm)"
      id="stroke2"
      type="number"
      [(value)]="engine2.stroke"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Largo de biela (mm)"
      id="connectingRodLength2"
      type="number"
      [(value)]="engine2.connectingRodLength"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Descentrado del perno (mm)"
      id="pistonOffset2"
      type="number"
      [(value)]="engine2.pistonOffset"
    ></app-input-card>
    <app-input-card
      label="Volumen de cámara (cm³)"
      id="combustionChamberVolume2"
      type="number"
      [(value)]="engine2.combustionChamberVolume"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Revoluciones del motor (1/min o RPM)"
      id="engineRPM2"
      type="number"
      [(value)]="engine2.engineRPM"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
    <app-input-card
      label="Retraso Cierre Admisión (RCA°)"
      id="intakeValveClosing2"
      type="number"
      [(value)]="engine2.intakeValveClosing"
      [validationFn]="validatePositiveNumber"
      (validation)="onValidaton($event)"
    ></app-input-card>
  </div>
</div>

<button id="calculateAndGraph" (click)="calculateAndGraph()" [disabled]="buttonDisabled">
  Calcular y Graficar
</button>

<div
  class="container grid grid-col-2 margin-botton-10"
  *ngIf="engine1Volume !== null && engine2Volume !== null"
>
  <div>
    <app-results-card
      title="Volumen Motor 1"
      [value]="engine1Volume | number : '1.2-2'"
      unit="cm³"
    />
    <app-results-card
      title="Factor de Compresión Estática"
      [value]="staticCompressionRatio1 | number : '1.2-2'"
      unit=": 1"
    />
    <app-results-card
      title="Factor de Compresión Dinámica"
      [value]="dynamicCompressionRatio1 | number : '1.2-2'"
      unit=": 1"
    />
    <app-results-card
      title="Diametro del Cilindro vs Carrera"
      [value]="cilinderDiameterVsStrokeRelation1"
      [unit]="'= ' + cilinderDiameterVsStrokeRelation1Type?.toUpperCase()"
    />
    <app-results-card
      title="Largo Biela vs Carrera"
      [value]="rodStrokeRatio1 | number : '1.2-2'"
      [unit]="'= ' + rodStrokeRatioCharacteristics1?.type?.toUpperCase()"
      [comment]="rodStrokeRatioCharacteristics1?.description"
    />
  </div>
  <div>
    <app-results-card
      title="Volumen Motor 2"
      [value]="engine2Volume | number : '1.2-2'"
      unit="cm³"
    />
    <app-results-card
      title="Factor de Compresión Estática"
      [value]="staticCompressionRatio2 | number : '1.2-2'"
      unit=": 1"
    />
    <app-results-card
      title="Factor de Compresión Dinámica"
      [value]="dynamicCompressionRatio2 | number : '1.2-2'"
      unit=": 1"
    />
    <app-results-card
      title="Diametro del Cilindro vs Carrera"
      [value]="cilinderDiameterVsStrokeRelation2"
      [unit]="'= ' + cilinderDiameterVsStrokeRelation2Type?.toUpperCase()"
    />
    <app-results-card
      title="Largo Biela vs Carrera"
      [value]="rodStrokeRatio2 | number : '1.2-2'"
      [unit]="'= ' + rodStrokeRatioCharacteristics2?.type?.toUpperCase()"
      [comment]="rodStrokeRatioCharacteristics2?.description"
    />
  </div>
</div>

<div class="container grid grid-col-2 margin-botton-10">
  <app-scatter-chart
    #positionChart
    chartId="positionChart"
    title="Posición del Pistón"
    xLabel="Ángulo de giro (grados)"
    yLabel="Posición (mm)"
  ></app-scatter-chart>
  <app-scatter-chart
    #velocityChart
    chartId="velocityChart"
    title="Velocidad del Pistón"
    xLabel="Ángulo de giro (grados)"
    yLabel="Velocidad (m/s)"
  ></app-scatter-chart>
  <app-scatter-chart
    #accelerationChart
    chartId="accelerationChart"
    title="Aceleración del Pistón"
    xLabel="Ángulo de giro (grados)"
    yLabel="Aceleración (m/s²)"
  ></app-scatter-chart>
  <app-scatter-chart
    #volumeChart
    chartId="volumeChart"
    title="Volumen del Cilindro"
    xLabel="Ángulo de giro (grados)"
    yLabel="Volumen (cm³)"
  ></app-scatter-chart>
</div>
