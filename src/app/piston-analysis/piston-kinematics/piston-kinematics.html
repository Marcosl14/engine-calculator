<h1>Análisis de Movimiento del Pistón</h1>

<div class="container grid grid-col-2 margin-botton-10">
  <div class="motor-inputs">
    <h3>Motor 1</h3>
    <div class="input-group">
      <label for="pistonDiameter1">Diámetro del pistón (mm):</label>
      <input type="number" id="pistonDiameter1" [(ngModel)]="engine1.pistonDiameter" />
    </div>
    <div class="input-group">
      <label for="stroke1">Carrera (mm):</label>
      <input type="number" id="stroke1" [(ngModel)]="engine1.stroke" />
    </div>
    <div class="input-group">
      <label for="connectingRodLength1">Largo de biela (mm):</label>
      <input type="number" id="connectingRodLength1" [(ngModel)]="engine1.connectingRodLength" />
    </div>
    <div class="input-group">
      <label for="pistonOffset1">Descentrado del perno (mm):</label>
      <input type="number" id="pistonOffset1" [(ngModel)]="engine1.pistonOffset" />
    </div>
    <div class="input-group">
      <label for="combustionChamberVolume1">Volumen de cámara (cm³):</label>
      <input
        type="number"
        id="combustionChamberVolume1"
        [(ngModel)]="engine1.combustionChamberVolume"
      />
    </div>
    <div class="input-group">
      <label for="engineRPM1">Revoluciones del motor (1/min o RPM):</label>
      <input type="number" id="engineRPM1" [(ngModel)]="engine1.engineRPM" />
    </div>
    <div class="input-group">
      <label for="intakeValveClosing1">Retraso Cierre Admisión (RCA°):</label>
      <input
        type="number"
        id="intakeValveClosing1"
        class="input-field"
        [(ngModel)]="engine1.intakeValveClosing"
      />
    </div>
  </div>

  <div class="motor-inputs">
    <h3>Motor 2</h3>
    <div class="input-group">
      <label for="pistonDiameter2">Diámetro del pistón (mm):</label>
      <input type="number" id="pistonDiameter2" [(ngModel)]="engine2.pistonDiameter" />
    </div>
    <div class="input-group">
      <label for="stroke2">Carrera (mm):</label>
      <input type="number" id="stroke2" [(ngModel)]="engine2.stroke" />
    </div>
    <div class="input-group">
      <label for="connectingRodLength2">Largo de biela (mm):</label>
      <input type="number" id="connectingRodLength2" [(ngModel)]="engine2.connectingRodLength" />
    </div>
    <div class="input-group">
      <label for="pistonOffset2">Descentrado del perno (mm):</label>
      <input type="number" id="pistonOffset2" [(ngModel)]="engine2.pistonOffset" />
    </div>
    <div class="input-group">
      <label for="combustionChamberVolume2">Volumen de cámara (cm³):</label>
      <input
        type="number"
        id="combustionChamberVolume2"
        [(ngModel)]="engine2.combustionChamberVolume"
      />
    </div>
    <div class="input-group">
      <label for="engineRPM2">Revoluciones del motor (1/min o RPM):</label>
      <input type="number" id="engineRPM2" [(ngModel)]="engine2.engineRPM" />
    </div>
    <div class="input-group">
      <label for="intakeValveClosing2">Retraso Cierre Admisión (RCA°):</label>
      <input
        type="number"
        id="intakeValveClosing2"
        class="input-field"
        [(ngModel)]="engine2.intakeValveClosing"
      />
    </div>
  </div>
</div>

<button id="calculateAndGraph" (click)="calculateAndGraph()">Calcular y Graficar</button>

<div
  class="container grid grid-col-2 margin-botton-10"
  *ngIf="engine1Volume !== null && engine2Volume !== null"
>
  <div>
    <app-results-card
      title="Volumen Motor 1"
      [value]="engine1Volume | number : '1.2-2'"
      unit="cm³"
    />
    <app-results-card
      title="Factor de Compresión Estática"
      [value]="staticCompressionRatio1 | number : '1.2-2'"
      unit=": 1"
    />
    <app-results-card
      title="Factor de Compresión Dinámica"
      [value]="dynamicCompressionRatio1 | number : '1.2-2'"
      unit=": 1"
    />
    <app-results-card
      title="Diametro del Cilindro vs Carrera"
      [value]="cilinderDiameterVsStrokeRelation1"
      [unit]="'= ' + cilinderDiameterVsStrokeRelation1Type?.toUpperCase()"
    />
    <app-results-card
      title="Largo Biela vs Carrera"
      [value]="rodStrokeRatio1 | number : '1.2-2'"
      [unit]="'= ' + rodStrokeRatioCharacteristics1?.type?.toUpperCase()"
      [comment]="rodStrokeRatioCharacteristics1?.description"
    />
  </div>
  <div>
    <app-results-card
      title="Volumen Motor 2"
      [value]="engine2Volume | number : '1.2-2'"
      unit="cm³"
    />
    <app-results-card
      title="Factor de Compresión Estática"
      [value]="staticCompressionRatio2 | number : '1.2-2'"
      unit=": 1"
    />
    <app-results-card
      title="Factor de Compresión Dinámica"
      [value]="dynamicCompressionRatio2 | number : '1.2-2'"
      unit=": 1"
    />
    <app-results-card
      title="Diametro del Cilindro vs Carrera"
      [value]="cilinderDiameterVsStrokeRelation2"
      [unit]="'= ' + cilinderDiameterVsStrokeRelation2Type?.toUpperCase()"
    />
    <app-results-card
      title="Largo Biela vs Carrera"
      [value]="rodStrokeRatio2 | number : '1.2-2'"
      [unit]="'= ' + rodStrokeRatioCharacteristics2?.type?.toUpperCase()"
      [comment]="rodStrokeRatioCharacteristics2?.description"
    />
  </div>
</div>

<div class="container grid grid-col-2 margin-botton-10">
  <app-scatter-chart
    #positionChart
    chartId="positionChart"
    title="Posición del Pistón"
    xLabel="Ángulo de giro (grados)"
    yLabel="Posición (mm)"
  ></app-scatter-chart>
  <app-scatter-chart
    #velocityChart
    chartId="velocityChart"
    title="Velocidad del Pistón"
    xLabel="Ángulo de giro (grados)"
    yLabel="Velocidad (m/s)"
  ></app-scatter-chart>
  <app-scatter-chart
    #accelerationChart
    chartId="accelerationChart"
    title="Aceleración del Pistón"
    xLabel="Ángulo de giro (grados)"
    yLabel="Aceleración (m/s²)"
  ></app-scatter-chart>
  <app-scatter-chart
    #volumeChart
    chartId="volumeChart"
    title="Volumen del Cilindro"
    xLabel="Ángulo de giro (grados)"
    yLabel="Volumen (cm³)"
  ></app-scatter-chart>
</div>
